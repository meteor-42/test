# ๐ XMR Tor Paywall

ะะฝะพะฝะธะผะฝัะน paywall ัะตัะฒะธั ั ะพะฟะปะฐัะพะน ัะตัะตะท Monero ะดะปั ัะฐะฑะพัั ะฒ ัะตัะธ Tor.

---

## ๐ ะัััััะน ััะฐัั

### ะขัะตะฑะพะฒะฐะฝะธั
- Linux ัะตัะฒะตั (CentOS/RHEL)
- Node.js 14+
- Tor
- Monero Wallet RPC

### ะฃััะฐะฝะพะฒะบะฐ
```bash
# ะะปะพะฝะธัะพะฒะฐัั ัะตะฟะพะทะธัะพัะธะน
git clone https://github.com/meteor-42/xmr.git
cd xmr

# ะฃััะฐะฝะพะฒะธัั ะทะฐะฒะธัะธะผะพััะธ
npm install

# ะะฐัััะพะธัั .env ัะฐะนะป
nano .env

# ะะฐะฟัััะธัั
node server.js
```

---

## ๐ ะะพะบัะผะตะฝัะฐัะธั

### ๐ [TOR_SETUP.md](TOR_SETUP.md) - ะะพะปะฝะฐั ะธะฝััััะบัะธั ะฟะพ ะทะฐะฟััะบั ะฒ Tor
ะะพะดัะพะฑะฝะพะต ััะบะพะฒะพะดััะฒะพ ะฟะพ ะฝะฐัััะพะนะบะต:
- ะฃััะฐะฝะพะฒะบะฐ Tor ะธ Hidden Service
- ะะฐัััะพะนะบะฐ Monero Wallet RPC
- ะะพะฝัะธะณััะฐัะธั .env
- ะกะพะทะดะฐะฝะธะต systemd ัะตัะฒะธัะพะฒ
- ะะตะทะพะฟะฐัะฝะพััั ะธ ะผะพะฝะธัะพัะธะฝะณ
- ะะตัะตะฝะธะต ะฟัะพะฑะปะตะผ

---

## โ๏ธ ะะพะฝัะธะณััะฐัะธั .env

ะะปััะตะฒัะต ะฟะฐัะฐะผะตััั, ะบะพัะพััะต **ะพะฑัะทะฐัะตะปัะฝะพ** ะฝัะถะฝะพ ะธะทะผะตะฝะธัั:

```env
# Onion ะฐะดัะตั ะฒะฐัะตะณะพ hidden service
ONION_ADDRESS=ะฒะฐั-ะฐะดัะตั.onion

# Monero ะฐะดัะตั ะดะปั ะฟัะธะตะผะฐ ะฟะปะฐัะตะถะตะน
XMR_ADDRESS=ะฒะฐั-monero-ะฐะดัะตั
XMR_ADDRESS=ะฒะฐั-monero-ะฐะดัะตั

# ะฆะตะฝะฐ ะดะพัััะฟะฐ ะฒ XMR
XMR_PRICE=1
XMR_PRICE=1

# ะะพะฝัะฐะบัะฝัะต ะดะฐะฝะฝัะต
CONTACT_EMAIL=ะฒะฐั-email@proton.me
GPG_FINGERPRINT=ะฒะฐั-gpg-fingerprint
```

ะะพะปะฝัะน ัะฟะธัะพะบ ะฟะฐัะฐะผะตััะพะฒ ัะผะพััะธัะต ะฒ ัะฐะนะปะต `.env`

---

## ๐๏ธ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโ
โ   Tor       โ  Hidden Service ะฝะฐ ะฟะพััั 80
โ   Network   โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโ
โ  server.js  โ  HTTP ัะตัะฒะตั (0.0.0.0:8080)
โ             โ  โข Paywall ัััะฐะฝะธัะฐ
โ             โ  โข ะัะพะฒะตัะบะฐ ะดะพัััะฟะฐ
โ             โ  โข ะะฐะทะดะฐัะฐ ะบะพะฝัะตะฝัะฐ
โโโโโโโโฌโโโโโโโ
       โ
       โโโโโโโโโโโโโโโโโโโ
       โ                 โ
       โผ                 โผ
โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ
โ   auth.js    โ  โxmr-monitor.jsโ
โ              โ  โ              โ
โ ะัะพะฒะตัะบะฐ     โ  โ ะะพะฝะธัะพัะธะฝะณ   โ
โ ัะพะบะตะฝะพะฒ      โ  โ ะฟะปะฐัะตะถะตะน     โ
โโโโโโโโโโโโโโโโ  โโโโโโโโฌโโโโโโโโ
                         โ
                         โผ
                  โโโโโโโโโโโโโโโโ
                  โ Monero RPC   โ
                  โ :18083       โ
                  โโโโโโโโโโโโโโโโ
```

---

## ๐ ะะตะทะพะฟะฐัะฝะพััั

### โ ะะตะฐะปะธะทะพะฒะฐะฝะพ
- ะะฐะฑะพัะฐ ัะพะปัะบะพ ัะตัะตะท Tor
- ะัะพะฒะตัะบะฐ ะฟะปะฐัะตะถะตะน ัะตัะตะท Monero RPC
- ะะตะฝะตัะฐัะธั ัะฝะธะบะฐะปัะฝัั subaddress ะดะปั ะบะฐะถะดะพะณะพ ะฟะปะฐัะตะถะฐ
- ะขะพะบะตะฝั ะดะพัััะฟะฐ ะดะปั ะฐะฒัะพัะธะทะพะฒะฐะฝะฝัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
- No-cache ะทะฐะณะพะปะพะฒะบะธ

### โ๏ธ ะะตะบะพะผะตะฝะดัะตััั ะดะพะฑะฐะฒะธัั
- Rate limiting (ัะผ. CODE_IMPROVEMENTS.md)
- Input validation
- ะะพะณะธัะพะฒะฐะฝะธะต ะฟะพะดะพะทัะธัะตะปัะฝะพะน ะฐะบัะธะฒะฝะพััะธ
- ะะตะณัะปััะฝะพะต ัะตะทะตัะฒะฝะพะต ะบะพะฟะธัะพะฒะฐะฝะธะต

---

## ๐ ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั

1. **ะะพะปัะทะพะฒะฐัะตะปั ะทะฐัะพะดะธั ะฝะฐ .onion ัะฐะนั**
   - ะะธะดะธั paywall ั ัะฝะธะบะฐะปัะฝัะผ ACCESS-ะบะพะดะพะผ
   - ะะพะปััะฐะตั Monero subaddress ะดะปั ะพะฟะปะฐัั

2. **ะัะฟัะฐะฒะปัะตั ะฟะปะฐัะตะถ**
   - ะะตัะตะฒะพะดะธั XMR ะฝะฐ ัะบะฐะทะฐะฝะฝัะน ะฐะดัะตั
   - ะะดะตั ะฟะพะดัะฒะตัะถะดะตะฝะธั (ะพะฑััะฝะพ 1-2 ะผะธะฝััั)

3. **ะะพะฝะธัะพัะธะฝะณ ะฟะปะฐัะตะถะฐ**
   - `xmr-monitor.js` ะบะฐะถะดัะต 15 ัะตะบัะฝะด ะฟัะพะฒะตััะตั ะฒัะพะดััะธะต ััะฐะฝะทะฐะบัะธะธ
   - ะัะธ ะดะพััะฐัะพัะฝะพะผ ะบะพะปะธัะตััะฒะต ะฟะพะดัะฒะตัะถะดะตะฝะธะน ะณะตะฝะตัะธััะตั access token

4. **ะะพะปััะตะฝะธะต ะดะพัััะฟะฐ**
   - ะะพะปัะทะพะฒะฐัะตะปั ะฒะฒะพะดะธั ัะฒะพะน ACCESS-ะบะพะด
   - ะกะธััะตะผะฐ ะฟัะพะฒะตััะตั ััะฐััั ะฟะปะฐัะตะถะฐ
   - ะัะธ ััะฟะตัะต ะฒัะดะฐะตั ัะพะบะตะฝ ะธ ัะตะดะธัะตะบัะธั ะฝะฐ ะบะพะฝัะตะฝั

5. **ะะพัััะฟ ะบ ะบะพะฝัะตะฝัั**
   - ะขะพะบะตะฝ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะดะพะฑะฐะฒะปัะตััั ะบะพ ะฒัะตะผ ัััะปะบะฐะผ
   - ะะพัััะฟ ะฐะบัะธะฒะตะฝ 365 ะดะฝะตะน

---

## ๐๏ธ ะะฐะทัะฐะฑะพัะบะฐ

### ะกัััะบัััะฐ ะฟัะพะตะบัะฐ
```
xmr/
โโโ server.js              # ะัะฝะพะฒะฝะพะน ัะตัะฒะตั
โโโ auth.js                # ะะพะฝััะพะปั ะดะพัััะฟะฐ
โโโ xmr-monitor.js         # ะะพะฝะธัะพัะธะฝะณ Monero
โโโ .env                   # ะะพะฝัะธะณััะฐัะธั (ะะ ะบะพะผะผะธัะธัั!)
โโโ package.json           # ะะฐะฒะธัะธะผะพััะธ
โโโ payments.json          # ะะฐะทะฐ ะฟะปะฐัะตะถะตะน (ะณะตะฝะตัะธััะตััั)
โโโ public/
โ   โโโ main.css          # ะกัะธะปะธ
โ   โโโ downloads/        # ะคะฐะนะปั ะดะปั ัะบะฐัะธะฒะฐะฝะธั
โโโ TOR_SETUP.md          # ะะฝััััะบัะธั ะฟะพ Tor
โโโ CODE_IMPROVEMENTS.md   # ะะตะบะพะผะตะฝะดะฐัะธะธ ะฟะพ ะบะพะดั
โโโ README.md             # ะญัะพั ัะฐะนะป
```

### ะะพะบะฐะปัะฝะฐั ัะฐะทัะฐะฑะพัะบะฐ
```bash
# ะะฐะฟััะบ ะฑะตะท Monero RPC (ะธัะฟะพะปัะทัะตััั fallback ะฐะดัะตั)
npm start

# ะะพัััะฟ ะฟะพ http://localhost:8080
```

### ะขะตััะธัะพะฒะฐะฝะธะต ะฟะปะฐัะตะถะตะน
ะะปั ัะตััะธัะพะฒะฐะฝะธั ัะพะทะดะฐะนัะต ะทะฐะฟะธัั ะฒ `payments.json`:
```json
{
  "TEST123": {
    "memo": "TEST123",
    "subaddress": "ัะตััะพะฒัะน-ะฐะดัะตั",
    "subaddressIndex": 999,
    "status": "confirmed",
    "access_token": "test_token",
    "created_at": 1234567890,
    "confirmed_at": 1234567890
  }
}
```

ะะฐัะตะผ ะธัะฟะพะปัะทัะนัะต `ACCESS-TEST123` ะดะปั ะฒัะพะดะฐ.

---

## ๐ ะะพะฝะธัะพัะธะฝะณ

### ะะพะณะธ
```bash
# ะะพะณะธ ะฟัะธะปะพะถะตะฝะธั
sudo journalctl -u xmr-paywall -f

# ะะพะณะธ Tor
sudo journalctl -u tor -f

# ะะพะณะธ Monero RPC
tail -f /var/log/monero-wallet-rpc.log
```

### ะกัะฐััั ัะตัะฒะธัะพะฒ
```bash
sudo systemctl status xmr-paywall
sudo systemctl status tor
sudo systemctl status monero-wallet-rpc
```

### ะะฐะทะฐ ะฟะปะฐัะตะถะตะน
```bash
# ะัะพัะผะพัั ะฒัะตั ะฟะปะฐัะตะถะตะน
cat payments.json | jq

# ะขะพะปัะบะพ ะฟะพะดัะฒะตัะถะดะตะฝะฝัะต
cat payments.json | jq 'to_entries | map(select(.value.status == "confirmed"))'

# ะะพะปะธัะตััะฒะพ pending ะฟะปะฐัะตะถะตะน
cat payments.json | jq 'to_entries | map(select(.value.status == "pending")) | length'
```

---

## ๐ง ะะพะทะผะพะถะฝัะต ะฟัะพะฑะปะตะผั

| ะัะพะฑะปะตะผะฐ | ะะตัะตะฝะธะต |
|----------|---------|
| RPC ะฝะต ะพัะฒะตัะฐะตั | `sudo systemctl restart monero-wallet-rpc` |
| Onion ะฝะตะดะพัััะฟะตะฝ | `sudo systemctl restart tor` |
| ะะปะฐัะตะถะธ ะฝะต ะฟะพะดัะฒะตัะถะดะฐัััั | ะัะพะฒะตัะธัั ัะธะฝััะพะฝะธะทะฐัะธั blockchain |
| ะัะธะฑะบะธ ะฒ ะปะพะณะฐั | `sudo journalctl -u xmr-paywall -n 100` |

ะะพะดัะพะฑะฝะตะต ัะผ. **TOR_SETUP.md** ัะฐะทะดะตะป "ะะพะทะผะพะถะฝัะต ะฟัะพะฑะปะตะผั"

---

## ๐ค ะะบะปะฐะด ะฒ ะฟัะพะตะบั

1. Fork ัะตะฟะพะทะธัะพัะธั
2. ะกะพะทะดะฐะนัะต feature branch (`git checkout -b feature/amazing-feature`)
3. Commit ะธะทะผะตะฝะตะฝะธะน (`git commit -m 'Add amazing feature'`)
4. Push ะฒ branch (`git push origin feature/amazing-feature`)
5. ะัะบัะพะนัะต Pull Request

---

## ๐ ะะธัะตะฝะทะธั

MIT License - ัะฒะพะฑะพะดะฝะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต

---

## โ๏ธ Disclaimer

ะญัะพั ะฟัะพะตะบั ะฟัะตะดะพััะฐะฒะปัะตััั "ะบะฐะบ ะตััั" ัะพะปัะบะพ ะดะปั ะพะฑัะฐะทะพะฒะฐัะตะปัะฝัั ัะตะปะตะน.

**ะะฐะถะฝะพ**:
- ะัะฟะพะปัะทัะนัะต ัะพะปัะบะพ ะดะปั ะปะตะณะฐะปัะฝัั ัะตะปะตะน
- ะกะพะฑะปัะดะฐะนัะต ะทะฐะบะพะฝั ะฒะฐัะตะน ััะธัะดะธะบัะธะธ
- ะะฒัะพัั ะฝะต ะฝะตััั ะพัะฒะตัััะฒะตะฝะฝะพััะธ ะทะฐ ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะะ
- ะัะธะฟัะพะฒะฐะปััะฝัะต ะพะฟะตัะฐัะธะธ ะผะพะณัั ะฑััั ัะตะณัะปะธััะตะผั ะฒ ะฒะฐัะตะน ัััะฐะฝะต

---

## ๐ ะะพะฝัะฐะบัั

ะะปั ะฒะพะฟัะพัะพะฒ ะธัะฟะพะปัะทัะนัะต email ะธะท `.env` ั GPG ัะธััะพะฒะฐะฝะธะตะผ.

**Stay anonymous. Stay secure.** ๐

---

## ๐ ะะพะปะตะทะฝัะต ัััะปะบะธ

- [Monero Official](https://www.getmonero.org/)
- [Tor Project](https://www.torproject.org/)
- [Monero RPC Docs](https://www.getmonero.org/resources/developer-guides/wallet-rpc.html)
- [Tor Hidden Services Guide](https://community.torproject.org/onion-services/)
